<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet RA École - Modèle Principal</title>
    
    <!-- 1. Librairies AR.js et A-Frame (le cœur de la Réalité Augmentée sur le Web) -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <style>
        /* Styles pour garantir que la RA couvre tout l'écran du smartphone */
        body { margin: 0; overflow: hidden; font-family: 'Arial', sans-serif; }
        
        /* Styles pour le message de dépannage/aide (Kawaii) */
        #help-message {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000;
            padding: 20px; background-color: #FFECF4; /* Rose très pâle */
            color: #FF69B4; /* Rose vif pour le texte */
            border: 4px solid #FFC0CB; /* Bordure Rose Bonbon */
            border-radius: 20px; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            font-size: 1.2em; line-height: 1.5; font-weight: bold;
        }
        #help-message strong { display: block; font-size: 1.5em; margin-bottom: 10px; }
        #marker-link { color: #C084FC; text-decoration: underline; margin-top: 10px; display: block; }
    </style>
</head>

<!-- Initialisation de la scène AR.js : utilise la webcam et cherche le marqueur HIRO -->
<body embedded arjs='sourceType: webcam; detectionMode: mono; patternRatio: 0.9; debugUIEnabled: false;'>

    <!-- Message de Dépannage/Aide visible avant la détection du marqueur -->
    <div id="help-message">
        <strong>✨ Bienvenue sur le Projet RA ! ✨</strong>
        <p>Ceci est la page de base du projet.</p>
        <p>Pour voir une biographie, veuillez naviguer vers le fichier personnalisé (ex: /ada.html).</p>
        <p>Sinon, pour le test : Pointez la caméra sur le **Marqueur HIRO** pour voir le modèle de base !</p>
        <a id="marker-link" href="./hiro.png" target="_blank">Cliquez ici pour voir et imprimer le Marqueur HIRO !</a>
        <p class="mt-2 text-red-500">Si vous voyez ce message, le code de base fonctionne !</p>
    </div>

    <!-- Script pour masquer le message d'aide lorsque la RA est prête -->
    <script>
        window.addEventListener('load', () => {
            const scene = document.querySelector('a-scene');
            const helpMessage = document.getElementById('help-message');
            
            // Masquer le message d'aide une fois que l'AR.js est chargé et le contenu détecté
            scene.addEventListener('arjs-original-contents-loaded', () => {
                console.log('AR.js est prêt. Le message d\'aide est masqué.');
                if (helpMessage) {
                    helpMessage.style.display = 'none';
                }
            });

            // Gérer les erreurs de caméra
            scene.addEventListener('camera-error', (e) => {
                if (helpMessage) { 
                     helpMessage.innerHTML = '<strong>❌ ERREUR CAMÉRA ! ❌</strong><p>Veuillez autoriser l\'accès à la caméra et recharger la page.</p>';
                }
            });
        });
    </script>


    <!-- SCÈNE A-FRAME ET AR.JS -->
    <a-scene 
        embedded 
        vr-mode-ui="enabled: false"
        arjs='sourceType: webcam; detectionMode: mono; patternRatio: 0.9; debugUIEnabled: false;'
    >

        <!-- ANCRE DU MARQUEUR (HIRO PREDÉFINI) -->
        <a-marker preset='hiro'>

            <!-- 1. PLACEHOLDER IMAGE (Le cœur rose de substitution) -->
            <!-- Ceci est affiché par défaut pour garantir que le composant a une source valide. -->
            <a-image
                src="https://placehold.co/150x150/FFC0CB/FF69B4?text=RA+OK" /* CORRIGÉ : Utilisation d'une URL HTTPS publique valide */
                position="0 0.5 0"         /* 0.5 mètre au-dessus du marqueur */
                rotation="-90 0 0"       /* Regarde l'utilisateur */
                width="1.5"                
                height="1.5"             
                opacity="0.9"             
            ></a-image>

            <!-- 2. ÉLÉMENT KAWAII SUPPLÉMENTAIRE (cône tournant) -->
            <a-cone 
                position="0 1.5 0" 
                rotation="90 0 0" 
                radius-bottom="0.5" 
                height="0.8"
                color="#FF69B4" 
                animation="property: rotation; to: 90 360 0; loop: true; dur: 3000; easing: linear;"
            >
            </a-cone>

        </a-marker>

        <!-- CAMÉRA (Nécessaire pour le flux vidéo) -->
        <a-entity camera></a-entity>

    </a-scene>
</body>
</html>
